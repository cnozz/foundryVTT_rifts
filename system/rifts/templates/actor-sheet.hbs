<form class="rifts sheet actor" autocomplete="off">
  <header>
    <h1><input name="name" value="{{name}}"/></h1>
    <nav class="tabs" data-group="primary">
      <a class="item" data-tab="summary">Summary</a>
      <a class="item" data-tab="main">Main</a>
      <a class="item" data-tab="inventory">Inventory</a>
      <a class="item" data-tab="skills">Skills</a>
      <a class="item" data-tab="abilities">Abilities/Powers</a>
      <a class="item" data-tab="spells">Spells</a>
      <a class="item" data-tab="psionics">Psionics</a>
    </nav>
  </header>

  <section class="sheet-body">
    {{!-- SUMMARY --}}
    <div class="tab" data-group="primary" data-tab="summary">
      <div class="grid threecol">
        <div>
          <h3>Vitals</h3>
          <div class="flex"><label>Level</label><input data-dtype="Number" type="number" name="system.details.level" value="{{system.details.level}}"/></div>
          <div class="flex"><label>XP</label><input data-dtype="Number" type="number" name="system.details.xp" value="{{system.details.xp}}"/></div>
          <div class="flex"><label>APM</label><input data-dtype="Number" type="number" name="system.combat.apm.base" value="{{system.combat.apm.base}}"/></div>
          <div class="flex"><label>Alignment</label><input name="system.details.alignment" value="{{system.details.alignment}}"/></div>
          <div class="flex"><label>Disposition</label><input name="system.details.disposition" value="{{system.details.disposition}}"/></div>
        </div>
        <div>
          <h3>Health & Scale</h3>
          <div class="flex"><label>Scale</label>
            <select name="system.combat.scale">
              <option value="SDC" {{#if (eq system.combat.scale "SDC")}}selected{{/if}}>SDC</option>
              <option value="MDC" {{#if (eq system.combat.scale "MDC")}}selected{{/if}}>MDC</option>
            </select>
          </div>
          {{#if (eq system.combat.scale "SDC")}}
            <div class="flex"><label>HP</label><input data-dtype="Number" type="number" name="system.combat.hp.value" value="{{system.combat.hp.value}}"/> / <input data-dtype="Number" type="number" name="system.combat.hp.max" value="{{system.combat.hp.max}}"/></div>
            <div class="flex"><label>SDC</label><input data-dtype="Number" type="number" name="system.combat.sdc.value" value="{{system.combat.sdc.value}}"/> / <input data-dtype="Number" type="number" name="system.combat.sdc.max" value="{{system.combat.sdc.max}}"/></div>
            <div class="flex"><label>Armor Rating (AR)</label><input data-dtype="Number" type="number" name="system.combat.ar" value="{{system.combat.ar}}"/></div>
          {{else}}
            <div class="flex"><label>MDC</label><input data-dtype="Number" type="number" name="system.combat.mdc.value" value="{{system.combat.mdc.value}}"/> / <input data-dtype="Number" type="number" name="system.combat.mdc.max" value="{{system.combat.mdc.max}}"/></div>
          {{/if}}
        </div>
        <div>
          <h3>Bonuses</h3>
          <div class="flex"><label>Strike</label><input data-dtype="Number" type="number" name="system.combat.strike.base" value="{{system.combat.strike.base}}"/></div>
          <div class="flex"><label>Parry</label><input data-dtype="Number" type="number" name="system.combat.parry.base" value="{{system.combat.parry.base}}"/></div>
          <div class="flex"><label>Dodge</label><input data-dtype="Number" type="number" name="system.combat.dodge.base" value="{{system.combat.dodge.base}}"/></div>
          <div class="flex"><label>Initiative</label><input data-dtype="Number" type="number" name="system.combat.initiative.base" value="{{system.combat.initiative.base}}"/></div>
        </div>
      </div>

      <h3>Movement</h3>
      <div class="grid threecol">
        <div>
          <strong>Land</strong>
          <div class="small">Feet per melee (15s)</div>
          <div class="flex"><label>Walk</label><input data-dtype="Number" type="number" name="system.movement.land.walkFPM" value="{{system.movement.land.walkFPM}}"/></div>
          <div class="flex"><label>Run</label><input data-dtype="Number" type="number" name="system.movement.land.runFPM" value="{{system.movement.land.runFPM}}"/></div>
          <div class="flex"><label>Sprint</label><input data-dtype="Number" type="number" name="system.movement.land.sprintFPM" value="{{system.movement.land.sprintFPM}}"/></div>
        </div>
        <div>
          <strong>Fly</strong>
          <div class="flex"><label>Fly FPM</label><input data-dtype="Number" type="number" name="system.movement.flyFPM" value="{{system.movement.flyFPM}}"/></div>
        </div>
        <div>
          <strong>Swim</strong>
          <div class="flex"><label>Swim FPM</label><input data-dtype="Number" type="number" name="system.movement.swimFPM" value="{{system.movement.swimFPM}}"/></div>
        </div>
      </div>

      <div class="grid threecol">
        <div>
          <h4>Converted (FPS / MPH)</h4>
          <div>Walk: <span data-speed="land-walk"></span></div>
          <div>Run: <span data-speed="land-run"></span></div>
          <div>Sprint: <span data-speed="land-sprint"></span></div>
        </div>
        <div>
          <h4>Fly</h4>
          <div>Fly: <span data-speed="fly"></span></div>
        </div>
        <div>
          <h4>Swim</h4>
          <div>Swim: <span data-speed="swim"></span></div>
        </div>
      </div>
    </div>

    {{!-- MAIN --}}
    <div class="tab" data-group="primary" data-tab="main">
      <div class="grid twocol">
        <div>
          <h3>Identity</h3>
          <div class="flex"><label>Name</label><input name="name" value="{{name}}"/></div>
          <div class="flex"><label>RCC</label><input name="system.details.rcc" value="{{system.details.rcc}}"/></div>
          <div class="flex"><label>OCC</label><input name="system.details.occ" value="{{system.details.occ}}"/></div>
          <div class="flex"><label>Combat Style</label><input name="system.details.combatStyle" value="{{system.details.combatStyle}}"/></div>
          <div class="flex"><label>Alignment</label><input name="system.details.alignment" value="{{system.details.alignment}}"/></div>
          <div class="flex"><label>Disposition</label><input name="system.details.disposition" value="{{system.details.disposition}}"/></div>
        </div>
        <div>
          <h3>Resources</h3>
          <div class="flex"><label>Level</label><input data-dtype="Number" type="number" name="system.details.level" value="{{system.details.level}}"/></div>
          <div class="flex"><label>XP</label><input data-dtype="Number" type="number" name="system.details.xp" value="{{system.details.xp}}"/></div>
          <div class="flex"><label>ISP</label><input data-dtype="Number" type="number" name="system.resources.isp.value" value="{{system.resources.isp.value}}"/> / <input data-dtype="Number" type="number" name="system.resources.isp.max" value="{{system.resources.isp.max}}"/></div>
          <div class="flex"><label>PPE</label><input data-dtype="Number" type="number" name="system.resources.ppe.value" value="{{system.resources.ppe.value}}"/> / <input data-dtype="Number" type="number" name="system.resources.ppe.max" value="{{system.resources.ppe.max}}"/></div>
          <div class="flex"><label>APM</label><input data-dtype="Number" type="number" name="system.combat.apm.base" value="{{system.combat.apm.base}}"/></div>
        </div>
      </div>

      <h3>Attributes</h3>
      <div class="grid">
        {{#each system.stats as |val key|}}
          <div class="stat">
            <label>{{key}}</label>
            <input data-dtype="Number" type="number" name="system.stats.{{key}}" value="{{val}}"/>
          </div>
        {{/each}}
      </div>

      <h3>Health & Defense</h3>
      <div class="grid threecol">
        <div class="flex"><label>Scale</label>
          <select name="system.combat.scale">
            <option value="SDC" {{#if (eq system.combat.scale "SDC")}}selected{{/if}}>SDC</option>
            <option value="MDC" {{#if (eq system.combat.scale "MDC")}}selected{{/if}}>MDC</option>
          </select>
        </div>
        {{#if (eq system.combat.scale "SDC")}}
          <div class="flex"><label>HP</label><input data-dtype="Number" type="number" name="system.combat.hp.value" value="{{system.combat.hp.value}}"/> / <input data-dtype="Number" type="number" name="system.combat.hp.max" value="{{system.combat.hp.max}}"/></div>
          <div class="flex"><label>SDC</label><input data-dtype="Number" type="number" name="system.combat.sdc.value" value="{{system.combat.sdc.value}}"/> / <input data-dtype="Number" type="number" name="system.combat.sdc.max" value="{{system.combat.sdc.max}}"/></div>
          <div class="flex"><label>Armor Rating (AR)</label><input data-dtype="Number" type="number" name="system.combat.ar" value="{{system.combat.ar}}"/></div>
        {{else}}
          <div class="flex"><label>MDC</label><input data-dtype="Number" type="number" name="system.combat.mdc.value" value="{{system.combat.mdc.value}}"/> / <input data-dtype="Number" type="number" name="system.combat.mdc.max" value="{{system.combat.mdc.max}}"/></div>
        {{/if}}
        <div class="flex"><label>Initiative</label><input data-dtype="Number" type="number" name="system.combat.initiative.base" value="{{system.combat.initiative.base}}"/></div>
        <div class="flex"><label>Strike</label><input data-dtype="Number" type="number" name="system.combat.strike.base" value="{{system.combat.strike.base}}"/></div>
        <div class="flex"><label>Parry</label><input data-dtype="Number" type="number" name="system.combat.parry.base" value="{{system.combat.parry.base}}"/></div>
        <div class="flex"><label>Dodge</label><input data-dtype="Number" type="number" name="system.combat.dodge.base" value="{{system.combat.dodge.base}}"/></div>
      </div>

      <h3>Saving Throws</h3>
      <div class="grid threecol">
        <div class="flex"><label>Magic</label><input data-dtype="Number" type="number" name="system.saves.magic" value="{{system.saves.magic}}"/></div>
        <div class="flex"><label>Psionics</label><input data-dtype="Number" type="number" name="system.saves.psionics" value="{{system.saves.psionics}}"/></div>
        <div class="flex"><label>Poison</label><input data-dtype="Number" type="number" name="system.saves.poison" value="{{system.saves.poison}}"/></div>
        <div class="flex"><label>Coma/Death</label><input data-dtype="Number" type="number" name="system.saves.comaDeath" value="{{system.saves.comaDeath}}"/></div>
        <div class="flex"><label>Insanity</label><input data-dtype="Number" type="number" name="system.saves.insanity" value="{{system.saves.insanity}}"/></div>
      </div>
    </div>

    {{!-- INVENTORY --}}
    <div class="tab" data-group="primary" data-tab="inventory">
      <div class="grid twocol">
        <div>
          <h3>Melee Weapons</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "weapon")}} {{#if (eq it.system.category "melee")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a> <span class="small">{{it.system.damage}} {{it.system.damageType}}</span></li>
              {{/if}} {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-weapon" data-category="melee">+ Add Melee</button>
        </div>
        <div>
          <h3>Modern Weapons (Guns)</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "weapon")}} {{#if (eq it.system.category "modern")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a> <span class="small">{{it.system.damage}} {{it.system.damageType}}</span></li>
              {{/if}} {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-weapon" data-category="modern">+ Add Gun</button>
        </div>
        <div>
          <h3>Armor</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "armor")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a> <span class="small">{{it.system.type}} {{it.system.rating}}</span></li>
              {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-armor">+ Add Armor</button>
        </div>
        <div>
          <h3>Equipment</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "gear")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a></li>
              {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-gear">+ Add Gear</button>
        </div>
      </div>
    </div>

    {{!-- SKILLS --}}
    <div class="tab" data-group="primary" data-tab="skills">
      <div class="grid twocol">
        <div>
          <h3>Base Skills</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "skill")}} {{#if (eq it.system.category "base")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a> <span class="small">({{it.system.base}}% + {{it.system.perLevel}}%/lvl + {{it.system.mod}}%)</span></li>
              {{/if}} {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-skill" data-category="base">+ Add Base Skill</button>
        </div>
        <div>
          <h3>Related Skills</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "skill")}} {{#if (eq it.system.category "related")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a> <span class="small">({{it.system.base}}% + {{it.system.perLevel}}%/lvl + {{it.system.mod}}%)</span></li>
              {{/if}} {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-skill" data-category="related">+ Add Related Skill</button>
        </div>
        <div>
          <h3>Secondary Skills</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "skill")}} {{#if (eq it.system.category "secondary")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a> <span class="small">({{it.system.base}}% + {{it.system.perLevel}}%/lvl + {{it.system.mod}}%)</span></li>
              {{/if}} {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-skill" data-category="secondary">+ Add Secondary Skill</button>
        </div>
        <div>
          <h3>Weapon Proficiencies</h3>
          <ul class="clean">
            {{#each items as |it|}}
              {{#if (eq it.type "skill")}} {{#if (eq it.system.category "wp")}}
                <li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a></li>
              {{/if}} {{/if}}
            {{/each}}
          </ul>
          <button type="button" data-action="add-skill" data-category="wp">+ Add WP</button>
        </div>
      </div>
    </div>

    {{!-- ABILITIES / POWERS --}}
    <div class="tab" data-group="primary" data-tab="abilities">
      <h3>Racial / Super Abilities</h3>
      <ul class="clean">
        {{#each items as |it|}}
          {{#if (eq it.type "power")}}
            {{#if (eq it.system.kind "racial")}}<li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a></li>{{/if}}
            {{#if (eq it.system.kind "super")}}<li data-item-id="{{it.id}}"><a data-action="open-item">{{it.name}}</a></li>{{/if}}
          {{/if}}
        {{/each}}
      </ul>
      <button type="button" data-action="add-power" data-kind="racial">+ Add Racial Ability</button>
      <button type="button" data-action="add-power" data-kind="super">+ Add Super Ability</button>
    </div>

    {{!-- SPELLS --}}
    <div class="tab" data-group="primary" data-tab="spells">
      <h3>Spells by Level</h3>
      <ul class="clean">
        {{#each items as |it|}}
          {{#if (eq it.type "power")}} {{#if (eq it.system.kind "spell")}}
            <li data-item-id="{{it.id}}">
              <a data-action="open-item">{{it.name}}</a>
              <span class="small">Lv {{it.system.level}} • Cost {{it.system.cost}} PPE • {{it.system.castingTime}}</span>
            </li>
          {{/if}} {{/if}}
        {{/each}}
      </ul>
      <button type="button" data-action="add-power" data-kind="spell">+ Add Spell</button>
    </div>

    {{!-- PSIONICS --}}
    <div class="tab" data-group="primary" data-tab="psionics">
      <h3>Psionic Powers</h3>
      <ul class="clean">
        {{#each items as |it|}}
          {{#if (eq it.type "power")}} {{#if (eq it.system.kind "psionic")}}
            <li data-item-id="{{it.id}}">
              <a data-action="open-item">{{it.name}}</a>
              <span class="small">Cost {{it.system.cost}} ISP</span>
            </li>
          {{/if}} {{/if}}
        {{/each}}
      </ul>
      <button type="button" data-action="add-power" data-kind="psionic">+ Add Psionic</button>
    </div>
  </section>
</form>